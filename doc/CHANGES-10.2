# $NetBSD: CHANGES-10.2,v 1.1.2.11 2025/02/27 10:21:27 martin Exp $

A complete list of changes from the NetBSD 10.1 release on 2024-12-16
until the 10.2 release:

doc/CHANGES-10.2                                created
doc/LAST_MINUTE                                 patched by hand
doc/README.files                                patched by hand
external/gpl2/groff/tmac/mdoc.local             patched by hand
sys/sys/param.h                                 patched by hand

	Welcome to 10.1_STABLE!

sys/arch/ofppc/ofppc/machdep.c			1.121

	PR 58909: call model_init() always, even if we could not
	fetch a "model" or "name" property.
	[martin, ticket #1030]

build.sh					1.383, 1.384, 1.388

	Add a new operation "show-revisionid" that extracts a marker
	usable to recreate the source (depending on the revision control
	system in use).
	[martin, ticket #1031]

sys/dev/pci/virtio_pci.c			1.44
sys/dev/pci/virtioreg.h				1.13

	PR port-sparc64/57290: On alpha and sparc64, use VirtIO 1.0 and
	VIRTIO_F_ACCESS_PLATFORM so that DMA to PCI-attached VirtIO
	devices works properly.  This is needed for Qemu to select the
	appropriate address space for PCI DMA.
	[martin, ticket #1032]

share/man/man9/rnd.9				1.33

	fix typo in rnd(9) documentation.
	[andvar, ticket #1033]

bin/sh/var.c					1.88

	Fix a core dump that can occur if TZ is unset and ToD_FORMAT
	contains and strftime() conversions which need to know the zone.
	[kre, ticket #1034]

sys/arch/sparc64/sparc64/trap.c			1.199

	PR 58936: do not panic if we hit a VA-hole address in copyin/copyout.
	[martin, ticket #1035]

sys/conf/copyright				1.23

	Welcome to 2025!
	[jnemeth, ticket #1036]

sys/ufs/ext2fs/ext2fs_vfsops.c			1.228
sys/ufs/ffs/ffs_vfsops.c			1.383,1.384
sys/ufs/ffs/ffs_wapbl.c				1.50
sys/ufs/lfs/lfs_vfsops.c			1.383

	ffs: PR 58837: missing locking around fs_fmod/time.
	[hannken, ticket #1037]

usr.bin/calendar/calendars/calendar.christian	1.13,1.14
usr.bin/calendar/calendars/calendar.holiday	1.35
usr.bin/calendar/calendars/calendar.judaic	1.12
usr.bin/calendar/calendars/calendar.usholiday	1.12

	calendars: Update for 2025.
	[nia, ticket #1038]

sys/kern/sys_process_lwpstatus.c		1.5
sys/kern/sys_ptrace_common.c			1.96
sys/sys/ptrace.h				1.77

	i386: PR 58983: fix INSTALL_FLOPPY kernel on i386.
	[hgutch, ticket #1039]

share/man/man5/services.5			1.11
usr.sbin/services_mkdb/services_mkdb.8		1.13

	services(5): PR 58998:  consistently refer to the cdb database.
	[uwe, ticket #1040]

share/man/man4/bwi.4				1.15
sys/arch/evbppc/conf/WII			1.7
sys/dev/ic/bwi.c				1.39-1.41
sys/dev/ic/bwireg.h				1.5
sys/dev/ic/bwivar.h				1.11
sys/dev/sdmmc/files.sdmmc			1.6
sys/dev/sdmmc/if_bwi_sdio.c			1.1
sys/dev/sdmmc/sdmmc_cis.c			1.10
sys/dev/sdmmc/sdmmcvar.h			1.38
sys/dev/sdmmc/sdmmcdevs				1.9
sys/dev/sdmmc/sdmmcdevs.h			1.9 (regen)

	evbppc: add Nintendo Wii WLAN support.
	[jmcneill, ticket #1041]

sys/arch/arm/nxp/imx6_iomux.c			1.4

	evbarm: add support for the RIoTboard i.MX6S IOMUX controller.
	[skrll, ticket #1042]

sys/arch/x86/x86/identcpu.c			1.132,1.133

	x86: PR 58982: fix MP boot issues on newer Apollo Lake CPUs.
	[andvar, ticket #1043]

sys/dev/i2c/i2c.c				1.91

	iic(4): make "i2cscan -r ..." work on the Raspberry PI.
	[brad, ticket #1044]

external/mpl/dhcp/dist/common/options.c		1.8

	dhcpd(8): safety fix.
	[christos, ticket #1045]

distrib/common/bootimage/Makefile.bootimage	1.43
distrib/vax/liveimage/emuimage/Makefile		1.5

	vax: make live image bootable.
	[tsutsui, ticket #1046]

etc/skel/dot.cshrc				1.10

	PR 59008: set $ENV in the default skel/dot.cshrc as dot.profile
	for su(1) etc.
	[tsutsui, ticket #1047]

sys/arch/macppc/stand/ofwboot/boot.c		1.32
sys/arch/macppc/stand/ofwboot/version		1.16

	macppy: tweak bootpath strings in ofwboot for OpenBIOS used on
	qemu-system-ppc.
	[tsutsui, ticket #1048]

sys/altq/altq_rmclass.h				1.14

	altq: cbq: fix a CBQ regression on 32bit platforms.
	[ozaki-r, ticket #1049]

sys/arch/xen/xenbus/xenbus_probe.c		1.61,1.62

	xen: fix attachment of cdrom xbd devices being skipped on kernels
	without PVHVM. Revert to pre-10 behaviour on pure PV kernels.
	[sborrill, ticket #1050]

sys/dev/dksubr.c				1.115

	dk_discard: fix stack data leakage.
	[jakllsch, ticket #1051]

sys/arch/evbppc/conf/WII			1.8
sys/arch/evbppc/conf/files.wii			1.5
sys/arch/evbppc/include/wii.h			1.10
sys/arch/evbppc/wii/dev/di.c			1.1
sys/arch/evbppc/wii/machdep.c			1.9
sys/kern/subr_disk_mbr.c			1.59

	evbppc: add support for Wii DVD drive.
	[jmcneill, ticket #1052]

sys/dev/pci/if_gem_pci.c			1.53

	gem(4): fix reading of Vital Product Data from ROM.
	[joe, ticket #1053]

sys/dev/pci/if_gem_pci.c			1.54,1.55

	gem(4): fix shared interrupt pin configuration and debug output.
	[joe, ticket #1054]

sys/dev/pci/if_vioif.c				1.114

	vioif(4): PR 59086: fix memory size mismatch when freeing
	memory in an error path.
	[joe, ticket #1055]

sys/arch/powerpc/pic/intr.c			1.35-1.37
sys/arch/powerpc/pic/picvar.h			1.14

	powerpc: fix interrupt handling with cascaded PICs.
	[jmcneill, ticket #1056]

distrib/utils/embedded/conf/evbppc.conf		1.4
sys/arch/evbppc/conf/WII			1.9
sys/arch/evbppc/wii/dev/bwai.c			1.4
sys/arch/evbppc/wii/pic_pi.c			1.2
sys/arch/powerpc/oea/cpu_subr.c			1.111

	evbppc: Wii: 
	- simplify processor interface pic code.
	- Audio playback improvements.
	- improve CPU identification messages.
	- remove some kernel options to save memory.
	- disable ntpd by default.
	[jmcneill, ticket #1057]

sys/dev/ic/bwi.c				1.42

	bwi(4): update rate control statistics on txeof to enable AMRR.
	[jmcneill, ticket #1058]

sys/arch/evbppc/wii/dev/sdhc_hollywood.c	1.4

	evbppc: wii: SDHC performance fix.
	[jmcneill, ticket #1059]

distrib/sun2/liveimage/emuimage/Makefile	1.5

	sun2: fix "live-image" build target.
	[tsutsui, ticket #1060]

lib/libm/Makefile				1.241

	hppa: libm: add missing fma(3) and variants.
	[tsutsui, ticket #1061]

sys/dev/ic/bwi.c				1.43

	bwi(4): remove a delay() loop in the PIO RX path.
	[jmcneill, ticket #1062]

sys/dev/sdmmc/sdhc.c				1.120,1.121
sys/dev/sdmmc/sdhcvar.h				1.36

	sdhc(4) performance fix.
	[jmcneill, ticket #1063]

sys/arch/evbppc/wii/pic_pi.c			1.3

	evbppc: wii: fix missed interrupt bug.
	[jmcneill, ticket #1064]

sys/arch/alpha/jensenio/jensenio.c		1.24

	alpha: fix a bug preventing ISA bus devices to attach.
	[thorpej, ticket #1065]

share/installboot/evbarm/boards.plist		1.13

	installboot(8): fix Olimex A20-OLinuXino-MICRO.
	[gutteridge, ticket #1066]

xsrc/external/mit/xorg-server/dist/ChangeLog         up to 1.1.1.28
xsrc/external/mit/xorg-server/dist/configure         up to 1.21
xsrc/external/mit/xorg-server/dist/configure.ac      up to 1.23
xsrc/external/mit/xorg-server/dist/meson.build       up to 1.1.1.18
xsrc/external/mit/xorg-server/dist/Xext/sync.c       up to 1.14
xsrc/external/mit/xorg-server/dist/Xi/xibarriers.c   up to 1.5
xsrc/external/mit/xorg-server/dist/Xi/xichangehierarchy.c up to 1.8
xsrc/external/mit/xorg-server/dist/composite/compalloc.c up to 1.1.1.9
xsrc/external/mit/xorg-server/dist/config/10-quirks.conf up to 1.1.1.2
xsrc/external/mit/xorg-server/dist/dix/devices.c     up to 1.16
xsrc/external/mit/xorg-server/dist/dix/dispatch.c    up to 1.9
xsrc/external/mit/xorg-server/dist/dix/enterleave.c  up to 1.10
xsrc/external/mit/xorg-server/dist/dix/eventconvert.c up to 1.1.1.8
xsrc/external/mit/xorg-server/dist/dix/main.c        up to 1.1.1.9
xsrc/external/mit/xorg-server/dist/glamor/glamor_program.c up to 1.1.1.4
xsrc/external/mit/xorg-server/dist/hw/xfree86/common/xf86Configure.c up to 1.13
xsrc/external/mit/xorg-server/dist/hw/xfree86/common/xf86sbusBus.c up to 1.8
xsrc/external/mit/xorg-server/dist/hw/xfree86/dri2/dri2.c up to 1.6
xsrc/external/mit/xorg-server/dist/hw/xfree86/drivers/modesetting/driver.c up to 1.8
xsrc/external/mit/xorg-server/dist/hw/xfree86/drivers/modesetting/drmmode_display.c up to 1.12
xsrc/external/mit/xorg-server/dist/hw/xfree86/drivers/modesetting/drmmode_display.h up to 1.1.1.5
xsrc/external/mit/xorg-server/dist/hw/xfree86/drivers/modesetting/present.c up to 1.9
xsrc/external/mit/xorg-server/dist/hw/xfree86/fbdevhw/fbdevhw.c up to 1.6
xsrc/external/mit/xorg-server/dist/include/dix-config.h.in up to 1.10
xsrc/external/mit/xorg-server/dist/include/do-not-use-config.h.in up to 1.1.1.17
xsrc/external/mit/xorg-server/dist/include/meson.build up to 1.1.1.7
xsrc/external/mit/xorg-server/dist/os/WaitFor.c      up to 1.6
xsrc/external/mit/xorg-server/dist/os/access.c       up to 1.8
xsrc/external/mit/xorg-server/dist/os/connection.c   up to 1.9
xsrc/external/mit/xorg-server/dist/render/picture.c  up to 1.1.1.10
xsrc/external/mit/xorg-server/dist/test/sync/sync.c  up to 1.1.1.2
xsrc/external/mit/xorg-server/dist/xkb/XKBMAlloc.c   up to 1.1.1.7
xsrc/external/mit/xorg-server/dist/xkb/XKBMisc.c     up to 1.1.1.8
xsrc/external/mit/xorg-server/dist/xkb/xkb.c         up to 1.11
xsrc/external/mit/xorg-server/dist/xkb/xkbUtils.c    up to 1.1.1.9
xsrc/external/mit/xorg-server/dist/xkb/xkbtext.c     up to 1.1.1.7
xsrc/external/mit/xorg-server/include/dix-config.h   up to 1.54
xsrc/external/mit/xorg-server/include/version-config.h up to 1.24
xsrc/external/mit/xorg-server/include/xorg-config.h  up to 1.34
xsrc/external/mit/xorg-server/include/xorg-server.h  up to 1.34
share/mk/bsd.x11.mk					(apply patch)

	Update xorg-server to 21.1.16, fixing various CVEs
	CVE-2025-26594, ZDI-CAN-25544                
	CVE-2025-26595, ZDI-CAN-25545                  
	CVE-2025-26596, ZDI-CAN-25543                    
	CVE-2025-26597, ZDI-CAN-25683                      
	CVE-2025-26598, ZDI-CAN-25740                        
	CVE-2025-26599, ZDI-CAN-25851                        
	CVE-2025-26600, ZDI-CAN-25871                          
	CVE-2025-26601, ZDI-CAN-25870                            
	[mrg, ticket #1067]

