# $NetBSD: CHANGES-11.0,v 1.1.2.22 2025/10/01 17:44:42 martin Exp $

A complete list of changes from the initial NetBSD 11.0 branch on 2025-07-30
until the 11.0 release:

doc/CHANGES-11.0				created
doc/LAST_MINUTE 				patched by hand
doc/README.files				patched by hand
external/gpl2/groff/tmac/mdoc.local		patched by hand
sys/sys/param.h 				patched by hand

	Welcome to 11.0_BETA!

sys/arch/i386/stand/boot/boot2.c		1.90
sys/arch/i386/stand/efiboot/boot.c		1.33

	x86: boot(8): reorder the pathes tried to load the kernel
	to avoid confusing loader messages.
	[pgoyette, ticket #3]

doc/CHANGES					(manually edited)

	fix typo

usr.sbin/sysinst/util.c				1.78

	sysinst(8): PR 59573: do not leave temporary files behind.
	[kim, ticket #4]

etc/named.conf					1.12-1.14

	named(8): adjust the default configuration following
	recommendations from https://www.dnsflagday.net/2020/.
	[kim, ticket #5]

sys/arch/amd64/conf/GENERIC			1.617
sys/arch/evbarm/conf/GENERIC64			1.227
sys/dev/pci/files.pci				1.451
sys/dev/pci/pvscsi.c				1.1,1.2
sys/dev/pci/pvscsi.h				1.1

	Add support for the VMware PV SCSI controller found
	in VMware's ESXi product.
	[skrll, ticket #6]

lib/libc/stdio/mktemp.3				1.36

	mkostemp(3): include O_CLOFORK in mkostemp()'s allowed flags.
	[kre, ticket #7]

lib/libc/stdlib/posix_openpt.3			1.11
sys/kern/tty_ptm.c				1.47
tests/lib/libc/ttyio/t_ptm.c			1.3

	posix_openpt(3): support O_CLOFORK.
	[gutteridge, ticket #8]

crypto/external/apache2/openssl/lib/libssl/Makefile 1.5

	libssl: link against libcrypto (again).
	[wiz, ticket #9]

sys/netipsec/ipsec_input.c			1.82

	ipsec: fix "no key association" log.
	[knakahara, ticket #10]

usr.sbin/npf/npfctl/npf_build.c			1.61

	npfctl(8): fix segfault with pcap-filter.
	[kim, ticket #11]

usr.sbin/npf/npfctl/npf_build.c			1.60

	npfctl(8): PR 59581: set layer 3 bit in dynamic rule attributes.
	[joe, ticket #12]

sys/arch/x86/conf/MICROVM.common		1.4

	x86: PR 59568: disable viogpu in MICROVM kernel configuration.
	[imil, ticket #13]

sys/arch/amd64/conf/MICROVM			1.4
sys/arch/i386/conf/MICROVM			1.4

	x86: add `+invtsc` to the QEMU command line example.
	[imil, ticket #14]

sys/netbt/hci.h					1.47

	blutooth: fix definition of Sniff Subrating command.
	[plunky, ticket #15]

external/lgpl2/userspace-rcu/lib/liburcu-signal/Makefile 1.2
external/lgpl2/userspace-rcu/lib/liburcu/Makefile 1.2
external/mpl/bind/Makefile.inc			1.18
external/mpl/bind/bind2netbsd			1.11
external/mpl/bind/include/config.h		1.24

	named: use liburcu-mb on netbsd.
	[mrg, ticket #16]

share/man/man7/hier.7				1.145

	hier(7): add entry for /var/shm.
	[kim, ticket #17]

distrib/notes/common/contents			1.188
etc/etc.amd64/Makefile.inc			1.18
etc/etc.i386/Makefile.inc			1.71

	x86: distribute the MICROVM kernel.
	See sys/arch/{amd64,i386}/conf/MICROVM for usage instructions.
	[imil, ticket #18]

sys/arch/virt68k/conf/GENERIC			1.11

	virt68k: disable viogpu(4) in GENERIC kernel.
	[isaki, ticket #19]

sys/arch/m68k/m68k/mmu_subr.s			1.4

	m68k: avoid a panic during boot on some machines.
	The PMOVE <ea>,TTn instruction does not support (An)+ addressing mode
	on 68030.
	[isaki, ticket #20]

distrib/sets/lists/man/mi			1.1810
distrib/sets/lists/manhtml/mi			1.31
share/man/man4/Makefile				1.748
share/man/man4/genet.4				1.1,1.2

	genet(4): add man page.
	[wiz, ticket #21]

sys/net/nd.c					1.8
tests/net/arp/t_arp.sh				1.49

	nd: PR 59596: fix the number of requests for address resolution.
	[ozaki-r, ticket #22]

distrib/miniroot/install.sh			1.29

	sun3: place a ptyfs instance into the newly-written /etc/fstab,
	so that e.g. sshd works out of the box after installation.
	[thorpej, ticket #23]

bin/sh/cd.c					1.54-1.56

	sh(1): PR 59565: cd "" is now an error, not == cd .
	Improve error messages from the "cd" builtin.
	[kre, ticket #24]

sys/arch/arm/cortex/gicv3.c			1.55,1.56

	gicv3: Appease KUBSAN (avoid undefined left-shift out of range).
	[rin, ticket #25]

external/gpl3/binutils/dist/gas/config/tc-vax.c	1.22

	vax: gas: PR 59326: use GOT for pointer for global function
	in same file, instead of PLT.
	[rin, ticket #26]

share/examples/devpubd/hooks/99-ugen-perms-minipro 1.2

	devpubd(8): update for newer "minipro" programmers:
	- T48 / T56 use the same USB VID/PID as the TL866II+.
	- Add the T76 USB VID/PID.
	[thorpej, ticket #27]

tests/kernel/t_umount.sh			1.9

	Update the kernel/t_umount test program to match new sh diagnostic.
	[christos, ticket #28]

sys/dev/usb/if_urtwn.c				1.113-1.117

	urtwn(4): 
	- Set the pipe index on usb xfer creation.
	- Plug an xfer leak in the tx error path.
	- Use the right packet spacing for the 8192EU.
	- Ensure that the receive packet processing does not exceed
	  beyond xfer length.
	[nat, ticket #29]

sys/dev/usb/xhci.c				1.190

	xhci(4): Handle special case of USBD_FORCE_SHORT_XFER.  This
	fixes devices such as urtwn(4) connected to an xhci port.
	[nat, ticket #30]

sys/dev/fdt/fdt_platform.c			1.3
sys/dev/fdt/files.fdt				1.75 via patch
sys/arch/arm/fdt/files.fdt			1.37
sys/arch/riscv/fdt/files.fdt			1.5

	Fix NULL-dereference crash during boot.
	[rin, ticket #31]

sys/dev/hdaudio/hdaudiodevs			1.13
sys/dev/hdaudio/hdaudiodevs.h			(regen)
sys/dev/hdaudio/hdaudiodevs_data.h		(regen)

	hdaudio(4): add NVIDIA GK208, REALTEK ALC897
	[nia, ticket #32]

sys/arch/hppa/hppa/trap.c			1.124-1.128

	hppa: fix inverted logic around probe access vs probe access immediate
	instructions and cleanup.
	[skrll, ticket #33]

usr.bin/elf2ecoff/elf2ecoff.c			1.37,1.38

	elf2ecoff: PR 59234: fix buffer overflow.
	[tsutsui, ticket #34]

external/cddl/osnet/dist/tools/ctf/cvt/ctfconvert.c 1.7
external/cddl/osnet/dist/tools/ctf/cvt/fixup_tdescs.c 1.8,1.9

	ctfconvert(1): PR 59659: make the tool version behave the same
	way as the native.
	[ozaki-r, ticket #35]

crypto/external/apache2/openssl/lib/libcrypto/Makefile 1.2
distrib/sets/lists/comp/mi			1.2498

	openssl(3): install thread.h.
	[christos, ticket #36]

bin/sh/option.list				1.12

	sh(1): PR 59646: improve portability of option code generation
	[kre, ticket #37]

sys/arch/riscv/riscv/bus_dma.c			1.11

	risc-v: PR 59653: adjust barriers issued in bus_dmamap_sync
	for the coherent case.
	[skrll, ticket #38]

external/apache2/mDNSResponder/dist/mDNSPosix/PosixDaemon.c 1.20

	mdnsd(8): PR 58778: mDNS spams console with recent build,
	default logging to off.
	[skrll, ticket #39]

sys/arch/arm/arm32/bus_dma.c			1.150
sys/arch/arm/include/cpufunc.h			1.92

	arm: PR 59654: adjust barriers issued in bus_dmamap_sync
	for the coherent case.
	[skrll, ticket #40]

share/man/man3/intro.3				1.37,1.38

	intro(3): PR 59676: remove reference to non-existent -lhesiod.
	[uwe, ticket #41]

external/gpl2/texinfo/dist/info/display.c	1.2

	info(1): fix ctype(3) usage to avoid coredump.
	[wiz, ticket #42]

sys/arch/amd64/amd64/locore.S			1.231-1.233
sys/arch/i386/i386/locore.S			1.202-1.204
sys/arch/xen/xen/hypervisor.c			1.100

	xen: fix PVH bootstrap code, don't assume the hvm_start_info structure
	is at the end of the symbol table.
	Fixes PVH dom0 boot under Xen 4.20.
	[bouyer, ticket #43]

sys/dev/usb/ehci.c				1.333

	ehci(4): fix device-probe for some machines.
	[rin, ticket #44]

distrib/sets/lists/debug/mi			1.486
distrib/sets/lists/tests/mi			1.1394
lib/libc/gen/ctype.3				1.32,1.33
lib/libc/gen/ctype_.c				1.24
lib/libc/gen/ctype_guard.h			1.8
lib/libc/gen/isctype.c				1.29
lib/libc/gen/tolower_.c				1.18
lib/libc/gen/toupper_.c				1.18
lib/libc/locale/Makefile.inc			1.69
lib/libc/locale/rune.c				1.50
tests/lib/libc/gen/Makefile			1.61
tests/lib/libc/gen/h_ctype_abuse.c		1.1
tests/lib/libc/gen/h_ctype_abuse.c		1.2
tests/lib/libc/gen/t_ctype.c			1.12

	ctype(3): PR : environment override for abuse traps.
	[riastradh, ticket #45]

