# $NetBSD: CHANGES-10.1,v 1.1.2.8 2024/05/04 12:05:45 martin Exp $

A complete list of changes from the NetBSD 10.0 release on 2024-03-28
until the 10.1 release:

doc/CHANGES-10.1                                created
doc/LAST_MINUTE                                 patched by hand
doc/README.files                                patched by hand
external/gpl2/groff/tmac/mdoc.local             patched by hand
sys/sys/param.h                                 patched by hand

	Welcome to 10.0_STABLE!

lib/libc/time/strptime.c			1.66

	strptime(3): PR 58041: pacify -Wsign-compare.
	[riastradh, ticket #648]

share/man/man4/ugen.4				1.39
sys/dev/usb/uftdi.c				1.77
sys/dev/usb/ugen.c				1.176
sys/dev/usb/usbdevices.config			1.43

	uftdi(4): fix openocd with the Tigard debug board.
	[thorpej, ticket #649]

sys/dev/usb/ugen.c				1.177

	ugen(4): add a "ugen-unit" device property for devpubd(8) scripts.
	[thorpej, ticket #651]

sys/arch/alpha/pci/irongate_pci.c		1.13

	alpha: add a missing barrier in irongate_conf_read0().
	[thorpej, ticket #652]

sys/dev/pci/if_iwn.c				1.100

	iwn(4): PR 58105: use the correct firmware file on
	Intel Centrino N 130.
	[riastradh, ticket #653]

share/mk/bsd.lib.mk				1.398,1.399,1.152 (via patch)

	bsd.x11.mk: PR 58104: use TOOL_AWK, not the build host's awk.
	[riastradh, ticket #654]

share/mk/bsd.own.mk				1.1365,1.1366
sys/arch/aarch64/include/sljit_machdep.h	1.4
sys/external/bsd/sljit/dist/sljit_src/sljitNativeARM_64.c 1.5
sys/modules/Makefile				1.285

	aarch64: PR 58103: enable SLJIT acceleration.
	[riastradh, ticket #655]

sys/stand/efiboot/efiboot.c			1.23

	efiboot: PR 58075: avoid invalid memory access with netboot.
	[riastradh, ticket #656]

distrib/evbarm/instkernel/sshramdisk/Makefile	1.26

	evbarm/sshramdisk: PR 58035: put firmware files in the right
        place.
	[riastradh, ticket #657]

share/man/man4/wg.4				1.8,1.9

	wg(4): PR 58015: man page improvements.
	[riastradh, ticket #658]

sys/netinet/sctp_asconf.c			1.14
sys/netinet6/in6_ifattach.c			1.122
sys/netinet6/nd6.c				1.282

	ipsecif(4): fix invalid IPv6 route after deletion of a tunnel.
	[knakahara, ticket #659]

sbin/ifconfig/ifconfig.8			1.126-1.129

	ifconfig(8): PR 58125: document lagg(4) parameters.
	[andvar, ticket #660]

sys/dev/pci/if_mcx.c				1.27

	mcx(4): PR 58124: enforce full-duplex mark in mcx_media_status(),
	when link is up.
	[andvar, ticket #661]

sys/arch/x86/x86/viac7temp.c			1.10

	viac7temp(4): PR 58148: fix the kernel module.
	[andvar, ticket #662]

share/mk/bsd.hostlib.mk				1.21

	Fix reproducible toolchain build on host toolchains   
        that do not support -iremap.
	[jakllsch, ticket #664]

sys/ddb/db_proc.c				1.16

	ddb(4): fix alignment of 'ps/[lw]' output.
	[skrll, ticket #665]

sys/arch/arm/arm32/pmap.c			1.443

	arm: PR 58135: don't unconditionally set XN in pmap_clearbit.
	[skrll, ticket #666]

sys/arch/aarch64/aarch64/cpu_machdep.c		1.15
sys/arch/aarch64/aarch64/sig_machdep.c		1.9

	aarch64: PR 58149: cannot return from a signal handler if SP was
	misaligned when the signal arrived.
	[skrll, ticket #667]

sys/kern/init_main.c				1.547
sys/kern/kern_hook.c				1.15
sys/kern/vfs_mount.c				1.104
sys/miscfs/procfs/procfs.h			1.83,1.84
sys/miscfs/procfs/procfs_subr.c			1.117
sys/miscfs/procfs/procfs_vfsops.c		1.112-1.114
sys/miscfs/procfs/procfs_vnops.c		1.230

	procfs: PR 39913, PR 57775: make kernel hooks exechook, exithook
	and forkhook MP-safe and make it safe to remove procfs nodes on
	exehook or proc exit.
	[hannken, ticket #668]

sys/dev/ccd.c					1.190

	ccd(4): PR 58043: allocate buffers with PR_NOWAIT and defer to
	kthread if out of memory. 
	[hannken, ticket #669]

external/bsd/ntp/lib/libntp/Makefile		1.28-1.34

	ntpd(8): fix timestamp in the binary for reproducable builds.
	[jakllsch, ticket #663]

sys/arch/vax/vax/unimpl_emul.S			1.5

	vax: fix assembler code to use constants of the correct size
	to fix reproducable builds (no functional change)
	[kalvisd, ticket #670]

sys/uvm/pmap/pmap.c				1.78
sys/uvm/pmap/pmap.h				1.27

	PR 58006: fix kernel hang in pmap_page_clear_attributes().
	[skrll, ticket #671]

distrib/sets/lists/xbase/mi			1.175
external/mit/xorg/bin/xsetwallpaper/Makefile	1.6

	PR 58172: install xsetwallpaper(1) manual page.
	[jakllsch, ticket #672]

sys/netinet6/frag6.c				1.78

	inet6: fix calculation of fragment length.
	[ozaki-r, ticket #673]

sbin/raidctl/raidctl.8				1.80
sbin/raidctl/raidctl.c				1.79
sys/dev/raidframe/raidframeio.h			1.12
sys/dev/raidframe/rf_diskqueue.c		1.64
sys/dev/raidframe/rf_diskqueue.h		1.30
sys/dev/raidframe/rf_disks.c			1.94,1.95
sys/dev/raidframe/rf_disks.h			1.15
sys/dev/raidframe/rf_driver.c			1.141
sys/dev/raidframe/rf_netbsdkintf.c		1.414
sys/dev/raidframe/rf_raid.h			1.52
sys/dev/raidframe/rf_reconstruct.c		1.129

	raid(4): implement hot removal of spares and components.
	[oster, ticket #674]

sbin/raidctl/raidctl.8				1.81
sbin/raidctl/raidctl.c				1.80

	raidctl(8): implement single command-line configuration of simple
	RAID sets.
	[oster, ticket #675]

sys/dev/usb/uftdi.c				1.79

	uftdi(4): add a match quirk to prevent matching any interface
	on SiPEED FPGA development boards (e.g. Tang Nano 9K).
	The FT2232s on these boards are wired up only for JTAG.
	[thorpej, ticket #676]

external/gpl3/gcc.old/dist/gcc/cp/cfns.h	1.12
(applied to external/gpl3/gcc/dist/gcc/cp/cfns.h)
usr.sbin/mtree/create.c				1.78

	Fix tool build on FreeBSD 14 (and possibly other systems).
	[hgutch, ticket #677]

lib/libc/gen/usleep.3				1.20,1.21
lib/libc/gen/usleep.c				1.21

	usleep(3): PR 58184: allow calls with useconds >= 1000000.
	[jdolecek, ticket #678]

sys/dev/usb/uftdi.c				1.78
sys/dev/usb/usbdevs				1.815
sys/dev/usb/usbdevs.h				(regen)
sys/dev/usb/usbdevs_data.h			(regen)

	uftdi(4): PR 58127: add some USB serial adapters.
	[maya, ticket #679]

libexec/httpd/dir-index-bozo.c			1.37

	httpd(8): PR 57962: create mobile-friendly directory listings.
	[maya, ticket #680]

etc/Makefile					1.470

	PR/58200: change "makeobsolete" to use the tool version of sed.
	[christos, ticket #681]

